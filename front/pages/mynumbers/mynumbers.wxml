<view class="container">
  <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
  <view class="header">
  </view>

  <!-- åˆ†ç»„åˆ‡æ¢å™¨ -->
  <view class="game-switcher">
    <button class="game-btn {{currentGame === 'ssq' ? 'active' : ''}}" data-game="ssq" bindtap="switchGame">åŒè‰²çƒ</button>
    <button class="game-btn {{currentGame === 'dlt' ? 'active' : ''}}" data-game="dlt" bindtap="switchGame">å¤§ä¹é€</button>
  </view>

  <!-- å·ç åˆ—è¡¨ -->
  <view class="numbers-list">
    <view class="number-item {{isManageMode ? 'manage-mode' : ''}}" wx:for="{{filteredNumbers}}" wx:key="id">
      <!-- å·¦ä¾§ - å·ç ä¸ä¿¡æ¯ -->
      <view class="number-info">
        <view class="numbers">
          <text class="number red" wx:for="{{item.red_balls}}" wx:for-item="ball" wx:key="*this">{{ball}}</text>
          <text class="number blue" wx:for="{{item.blue_balls}}" wx:for-item="ball" wx:key="*this">{{ball}}</text>
        </view>
        <view class="meta-info">
          <text class="create-time">æ”¶è—äº: {{item.created_at}}</text>
        </view>
      </view>

      <!-- å³ä¾§ - æ“ä½œæŒ‰é’® -->
      <view class="actions">
        <button class="action-btn history-btn" bindtap="checkWinning" data-id="{{item.id}}">æ ¸å¯¹ä¸­å¥–</button>
        <button class="action-btn delete-btn" bindtap="deleteNumber" data-id="{{item.id}}">åˆ é™¤</button>
      </view>


    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{filteredNumbers.length === 0}}">
    <text class="empty-text">å½“å‰åˆ†ç±»ä¸‹æš‚æ— å·ç </text>
    <button class="goto-generate-btn" bindtap="gotoGenerate">å»ç”Ÿæˆå·ç </button>
  </view>

  <!-- ä¸­å¥–ç»“æœå¼¹çª— -->
  <view class="winning-modal" wx:if="{{showWinningModal}}">
    <view class="modal-mask" bindtap="closeWinningModal"></view>
    <view class="modal-content">
      <view class="modal-header">
        <text class="modal-title">ğŸ‰ è¿‘15æœŸä¸­å¥–æ ¸å¯¹ç»“æœ</text>
        <view class="close-btn" bindtap="closeWinningModal">âœ•</view>
      </view>
      
      <view class="modal-body">
        <!-- æœªä¸­å¥– -->
        <view class="no-winning" wx:if="{{winningData.totalMatches === 0}}">
          <view class="no-winning-icon">ğŸ˜”</view>
          <text class="no-winning-text">å¾ˆé—æ†¾ï¼Œè¯¥ç»„å·ç æœ€è¿‘15æœŸæ²¡æœ‰ä¸­å¥–</text>
          <text class="no-winning-tip">ç»§ç»­åŠ æ²¹å“¦ï¼</text>
        </view>
        
        <!-- æœ‰ä¸­å¥– -->
        <view class="has-winning" wx:else>
          <view class="summary-card">
            <view class="summary-item">
              <text class="summary-label">ä¸­å¥–æ¬¡æ•°</text>
              <text class="summary-value highlight">{{winningData.totalMatches}}æ¬¡</text>
            </view>
            <view class="summary-divider"></view>
            <view class="summary-item">
              <text class="summary-label">ç´¯è®¡å¥–é‡‘</text>
              <text class="summary-value prize">{{winningData.totalPrizeText}}</text>
            </view>
          </view>
          
          <view class="details-title">ä¸­å¥–æ˜ç»†</view>
          
          <scroll-view class="details-list" scroll-y="true">
            <view class="detail-card" wx:for="{{winningData.matches}}" wx:key="index">
              <view class="detail-header">
                <view class="period-info">
                  <text class="period-label">ç¬¬{{item.period}}æœŸ</text>
                  <text class="date-label">{{item.drawDate}}</text>
                </view>
                <view class="win-level {{item.levelClass}}">{{item.winLevel}}</view>
              </view>
              
              <view class="detail-body">
                <view class="match-info">
                  <view class="match-item">
                    <text class="match-label">çº¢çƒ</text>
                    <text class="match-count red">{{item.redMatches}}ä¸ª</text>
                  </view>
                  <view class="match-item">
                    <text class="match-label">è“çƒ</text>
                    <text class="match-count blue">{{item.blueMatches}}ä¸ª</text>
                  </view>
                </view>
                <view class="prize-info">
                  <text class="prize-label">å¥–é‡‘</text>
                  <text class="prize-amount">{{item.prizeText}}</text>
                </view>
              </view>
            </view>
          </scroll-view>
        </view>
      </view>
      
      <view class="modal-footer">
        <button class="confirm-btn" bindtap="closeWinningModal">ç¡®å®š</button>
      </view>
    </view>
  </view>
</view>

